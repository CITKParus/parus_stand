# Сервер стенда

* Взаимодействие с ПП Парус 8
* Обработка запросов Telegram-бота
* Обработка запросов сервиса печати
* Взаимодействие с вендинговым автоматом

Сервер возвращает JSON-ответ в формате:
```
{    
    "state": КОД_СОСТОЯНИЯ,
    "message": СООБЩЕНИЕ / ДАННЫЕ_ОТВЕТА
}
```
Где:

*state* - Код состояния ответа сервера. Принимает значения "OK" (успех) или "ERR" (ошибка). В случае, если состояние имеет значение "ERR", в "message" - содержится сообщение об ошибке. Для состояния "OK" поле "message" содержит данные ответа.

*message* - Сообщение об ошибке, или данные ответа (как правило JSON-объект), в зависимости от значения поля "state".


Каждый запрос к серверу должен содержать параметры *token* и *action*, указывающие на уникальный идентификатор клиента, осуществляющего запрос и код действия, соответственно.

### Функции сервера:

#### Получение состояния стенда (STAND_GET_STATE)
Способ передачи параметров: *POST, GET*


Параметры:

*token* - обязательный, строка, уникальный идентификатор клиента

*action* - обязательный, строка, принимает значение "STAND_GET_STATE"

Описание: возвращает сведения о номенклатурах, загруженных в вендинговый аппарат, их текущих остатках, динамике остатков, несколько последних сообщений в очереди уведомлений стенда, интегральное состояние остатков в вендинговой машине (много, заканчивается товар, аппарат пуст)


### Аутентификация пользователя по штрих-коду (AUTH_BY_BARCODE)
Способ передачи параметров: *POST, GET*


Параметры:

*token* - обязательный, строка, уникальный идентификатор клиента

*action* - обязательный, строка, принимает значение "AUTH_BY_BARCODE"

*barcode* - обязательный, строка, штрих-код посетителя стенда

Описание: по полученному штрих-коду посетителя возвращает сведения о нём (рег. номер контрагента в ПП Парус 8, его мнемокод, наименование), а так же описание текущего состояния остатков вендингового аппарата (текущие товарные запасы по местам хранения)


### Запрос на отгрузку товара из вендингового автомата (SHIPMENT)
Способ передачи параметров: *POST, GET*


Параметры:

*token* - обязательный, строка, уникальный идентификатор клиента

*action* - обязательный, строка, принимает значение "SHIPMENT"


### Добавление сообщения в очередь уведомлений стенда (MSG_INSERT)
Способ передачи параметров: *POST, GET*


Параметры:

*token* - обязательный, строка, уникальный идентификатор клиента

*action* - обязательный, строка, принимает значение "MSG_INSERT"


### Получение списка сообщений очереди уведомлений стенда (MSG_GET_LIST)
Способ передачи параметров: *POST, GET*


Параметры:

*token* - обязательный, строка, уникальный идентификатор клиента

*action* - обязательный, строка, принимает значение "MSG_GET_LIST"

